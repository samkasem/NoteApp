{"ast":null,"code":"import _objectSpread from\"E:/Projects/Django_React_NoteApp/notes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"E:/Projects/Django_React_NoteApp/notes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/Projects/Django_React_NoteApp/notes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/Projects/Django_React_NoteApp/notes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{ReactComponent as ArrowLeft}from\"../assets/arrow-left.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var params=useParams();var noteId=params.id;var nav=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();});var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId===\"new\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/api/notes/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(note)});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(note)});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});case 2:nav(\"/\",{replace:true});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!==\"new\"||note.body===null){deleteNote();}else if(noteId!==\"new\"){updateNote();}else if(noteId===\"new\"&&note.body!==null){createNote();}nav(\"/\",{replace:true});};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{body:value});});console.log(\"Handle Change:\",note);};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!==\"new\"?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ReactComponent","ArrowLeft","NotePage","params","noteId","id","nav","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","replace","handleSubmit","handleChange","value","console","log","e","target"],"sources":["E:/Projects/Django_React_NoteApp/notes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { ReactComponent as ArrowLeft } from \"../assets/arrow-left.svg\";\r\n\r\nconst NotePage = () => {\r\n  const params = useParams();\r\n  const noteId = params.id;\r\n  const nav = useNavigate();\r\n  const [note, setNote] = useState(null);\r\n  useEffect(() => {\r\n    getNote();\r\n  });\r\n\r\n  const getNote = async () => {\r\n    if (noteId === \"new\") return;\r\n\r\n    const response = await fetch(`/api/notes/${noteId}/`);\r\n    const data = await response.json();\r\n    setNote(data);\r\n  };\r\n\r\n  const createNote = async () => {\r\n    await fetch(`/api/notes/create/`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(note)\r\n    });\r\n  };\r\n\r\n  const updateNote = async () => {\r\n    await fetch(`/api/notes/${noteId}/update/`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(note)\r\n    });\r\n  };\r\n\r\n  const deleteNote = async () => {\r\n    await fetch(`/api/notes/${noteId}/delete/`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    });\r\n    nav(\"/\", { replace: true });\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (noteId !== \"new\" || note.body === null) {\r\n      deleteNote();\r\n    } else if (noteId !== \"new\") {\r\n      updateNote();\r\n    } else if (noteId === \"new\" && note.body !== null) {\r\n      createNote();\r\n    }\r\n    nav(\"/\", { replace: true });\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setNote((note) => ({ ...note, body: value }));\r\n    console.log(\"Handle Change:\", note);\r\n  };\r\n\r\n  return (\r\n    <div className=\"note\">\r\n      <div className=\"note-header\">\r\n        <h3>\r\n          <ArrowLeft onClick={handleSubmit} />\r\n        </h3>\r\n        {noteId !== \"new\" ? (\r\n          <button onClick={deleteNote}>Delete</button>\r\n        ) : (\r\n          <button onClick={handleSubmit}>Done</button>\r\n        )}\r\n      </div>\r\n      <textarea\r\n        onChange={(e) => {\r\n          handleChange(e.target.value);\r\n        }}\r\n        value={note?.body}\r\n      ></textarea>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotePage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}